// Code generated by silly-enum-codegen. DO NOT EDIT.

package {{.Package}}

import (
	"encoding/json"
	"errors"
	"fmt"
)

var Err{{.Enum}}InvalidValue = errors.New("{{.Enum}} invalid value")

func (v {{.Enum}}) String() string {
    s, _ := v.string()

	return s
}

func (v {{.Enum}}) string() (string, error) {
	switch v {
{{range .Values}}
	case {{.}}:
		return "{{.}}", nil
{{end}}
	default:
		return fmt.Sprintf("{{.Enum}}=%v", {{.BaseType}}(v)),
		    fmt.Errorf("%v: %w", {{.BaseType}}(v), Err{{.Enum}}InvalidValue)
	}
}

func (v *{{.Enum}}) Set(s string) error {
	switch s {
{{range .Values}}
	case "{{.}}":
		*v = {{.}}
{{end}}
	default:
		return fmt.Errorf("%q: %w", s, Err{{.Enum}}InvalidValue)
	}

	return nil
}

func ({{.Enum}}) Type() string {
	return "{{.Enum}}"
}


func (v {{.Enum}}) MarshalJSON() ([]byte, error) {
    s, err := v.string()
    if err != nil {
        return nil, err
    }

    return json.Marshal(s)
}

func (v *{{.Enum}}) UnmarshalJSON(data []byte) error {
	{
		var s string

		if err := json.Unmarshal(data, &s); err == nil {
		    return v.Set(s)
		}
	}

	var n {{.BaseType}}

	if err := json.Unmarshal(data, &n); err != nil {
		return fmt.Errorf("parsing {{.Enum}} value: %w", err)
	}

	switch {{.Enum}}(n) {
{{range .Values}}
	case {{.}}:
	*v = {{.}}
{{end}}
	default:
		return fmt.Errorf("%v: %w", n, Err{{.Enum}}InvalidValue)
	}

	return nil
}

func (v {{.Enum}}) MarshalText() (text []byte, err error) {
    s, err := v.string()
    if err != nil {
        return nil, err
    }

    return []byte(s), nil
}

func (v *{{.Enum}}) UnmarshalText(text []byte) error {
	return v.Set(string(text))
}